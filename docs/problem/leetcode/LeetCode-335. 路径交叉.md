# LeetCode: 335. 路径交叉

[TOC]

## 1、题目描述

给定一个含有 `n` 个正数的数组 `x`。从点 `(0,0)` 开始，先向北移动 `x[0]` 米，然后向西移动 `x[1]` 米，向南移动 `x[2]` 米，向东移动 `x[3]` 米，持续移动。也就是说，每次移动后你的方位会发生逆时针变化。

编写一个 `O(1)` 空间复杂度的一趟扫描算法，判断你所经过的路径是否相交。

 

**示例 1:**

```
┌───┐
│   │
└───┼──>
    │

输入: [2,1,1,2]
输出: true 
```

**示例 2:**

```
┌──────┐
│      │
│
│
└────────────>

输入: [1,2,3,4]
输出: false 
```

**示例 3:**

```
┌───┐
│   │
└───┼>

输入: [1,1,1,1]
输出: true 


```



## 2、解题思路

-   将这个过程看成是一条贪吃蛇的走步，如果会咬到身体就是有交叉
-   会咬到身体一共有下面几种情况，小于三步肯定不能咬到身体

四步

```
                            
             b              
                            
      <-------------^       
      |             |       
      |             |       
  c   |             |   a   
      |             |       
      |             |       
      v ------------+---->  
                    |       
             d              
                            
```

五步

```
                             
             b               
                             
      <-------------         
      |             ^        
      |             |        
  c   |             |   a    
      |             |        
      |             |        
      |             |        
      |             ^        
      |      d      |        
      |             |    e   
      v ------------>        
```

六步

```
                                   
             b                     
                                   
      <-------------               
      |             ^              
      |             |              
  c   |             |   a          
      |             |              
      |             |              
      |        <----+------^       
      |             |   f  |       
      |                    |   e   
      |                    |       
      v                    |       
        ----------------->         
               d                   
                                   
```

除此之外的情况，都能归纳到这几种情况，从前向后依次判断即可

```python
class Solution:
    def isSelfCrossing(self, x: List[int]) -> bool:
        if len(x) <= 3:
            return False
        a, b, c, (d, e, f) = 0, 0, 0, x[:3]

        for i in range(3, len(x)):
            a, b, c, d, e, f = b, c, d, e, f, x[i]
            # 四条线相交
            if e <= c and f >= d:
                return True
            # 五条线相交
            if c == e and d <= b + f:
                return True
            # 六条线相交
            if c - a <= e <= c and f + b >= d > b:
                return True
        return False
```

